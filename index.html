<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Meowmatical!</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <h1><img src="meowmatical.PNG" alt="Meowmatical Logo" width="300" height="100"></h1>
  <p id="lambda-info">
    <!-- loaded with AJAX -->
  </p>
  <div class="content"> 
  <div class="row">
    <div class="column">
      <div> 
        <h2>Theorems</h2>
        <ul> 
          <li>
            <a href="fermat.html">Fermat's Little Theorem</a><div id="Likes"><span id="fermat-likes"></span> Like(s)</div>
          </li>
      </div>
      <script>
        document.addEventListener("DOMContentLoaded", function() {
            let lambda = document.getElementById("lambda-info");
            const counter = document.getElementById("fermat-likes"); 
            if (!counter) return; 
            const xhr = new XMLHttpRequest(); 
            xhr.open("GET", "https://ff0fnmu6n5.execute-api.us-east-2.amazonaws.com/items/fermat-likes");
            xhr.onload = function() {
              const data = JSON.parse(xhr.responseText); 
              const count = data.count; 
              counter.textContent = count || 0; 
            };
            xhr.send(); 
          });
       </script>
      <div>
        <h2>Proofs</h2>
        <ul> 
          <li>
            <a href="induction.html">Proof by Induction</a><div id="Likes"><span id="induction-likes"></span> Like(s)</div>
          </li>
        </ul>
        <script>
          document.addEventListener("DOMContentLoaded", function() {
            let lambda = document.getElementById("lambda-info");
            const counter = document.getElementById("induction-likes"); 
            if (!counter) return; 
            const xhr = new XMLHttpRequest(); 
            xhr.open("GET", "https://ff0fnmu6n5.execute-api.us-east-2.amazonaws.com/items/induction-likes");
            xhr.onload = function() {
              const data = JSON.parse(xhr.responseText); 
              const count = data.count; 
              counter.textContent = count || 0; 
            };
            xhr.send(); 
          });
      </script>
      </div>
    
      <div>
        <h2>Calculus Concepts</h2>
        <ul> 
          <li>
            <a href="integrals.html">Integrals</a><div id="Likes"><span id="integrals-likes"></span> Like(s)</div>
          </li>
        </ul>
        <script>
          document.addEventListener("DOMContentLoaded", function() {
              const counter = document.getElementById("integrals-likes"); 
              if (!counter) return; 
              const xhr = new XMLHttpRequest();
              xhr.open("GET", "https://ff0fnmu6n5.execute-api.us-east-2.amazonaws.com/items/integrals-likes");
              xhr.onload = function() {
                const data = JSON.parse(xhr.responseText); 
                const count = data.count; 
                counter.textContent = count || 0; 
              };
              xhr.send(); 
            });
        </script>
      </div>
    </div>
    
    <div class="column">
      <div>
        <h2>Topological Concepts</h2>
        <ul>
          <li>
            <a href="rationaltangles.html">Rational Tangles</a><div id="Likes"><span id="rational-likes"></span> Like(s)</div>
          </li>
        </ul>
        <script>
          document.addEventListener("DOMContentLoaded", function() {
              const counter = document.getElementById("rational-likes"); 
              if (!counter) return; 
              const xhr = new XMLHttpRequest();
              xhr.open("GET", "https://ff0fnmu6n5.execute-api.us-east-2.amazonaws.com/items/rational-likes");
              xhr.onload = function() {
                const data = JSON.parse(xhr.responseText); 
                const count = data.count; 
                counter.textContent = count || 0; 
              };
              xhr.send(); 
            });
        </script>
      </div>
    
      <div>
        <h2>Overview of Fields</h2>
        <ul>
          <li>
            <a href="combinatorics.html">Combinatorics</a><div id="Likes"><span id="combinatorics-likes"></span> Like(s)</div>
          </li>
        </ul>
        <script>
          document.addEventListener("DOMContentLoaded", function() {
              const counter = document.getElementById("combinatorics-likes"); 
              if (!counter) return; 
              const xhr = new XMLHttpRequest();
              xhr.open("GET", "https://ff0fnmu6n5.execute-api.us-east-2.amazonaws.com/items/combinatorics-likes");
              xhr.onload = function() {
                const data = JSON.parse(xhr.responseText); 
                const count = data.count; 
                counter.textContent = count || 0; 
              };
              xhr.send(); 
            });
        </script>
      </div>
    
      <div>
        <h2>Irrationalities</h2>
        <ul>
          <li>
            <a href="imaginarynumbers.html">Imaginary Numbers</a><div id="Likes"><span id="imaginary-likes"></span> Like(s)</div>
          </li>
        </ul>
        <script>
          document.addEventListener("DOMContentLoaded", function() {
              const counter = document.getElementById("imaginary-likes"); 
              if (!counter) return; 
              const xhr = new XMLHttpRequest();
              xhr.open("GET", "https://ff0fnmu6n5.execute-api.us-east-2.amazonaws.com/items/imaginary-likes");
              xhr.onload = function() {
                const data = JSON.parse(xhr.responseText); 
                const count = data.count; 
                counter.textContent = count || 0; 
              };
              xhr.send(); 
            });
        </script>
      </div>
    </div>
  </div>
<div class="UserInput">
  <div class="QuestionBox">
      <p> Do you have a topic that you want covered on this page? Let us know!</p>
      <p class="caption">(Refresh the page to see your submission!)
      <div class="Suggestions">
      <form id="SuggestionBox"> 
        <label for="topic">Topic: </label>
        <select placeholder="Topic..." id="topic" name="topic">
          <option value="Theorem">Theorem</option>
          <option value="Proof">Proof</option>
          <option value="Calculus">Calculus Concept</option>
          <option value="Topology">Topological Concept</option>
          <option value="Overview">Overview of Fields</option>
          <option value="Irrationality">Irrationalities</option>
        <input type="text" placeholder="Concept..." id="concept" name="concept">
      </form>    
      <button id="addTopic">Submit!</button>
      <script> 
      function escapeHTML(str) {
        return str.replace(/[&<>"'`=\/]/g, (char) => ({
          '&': '&amp;',
          '<': '&lt;',
          '>': '&gt;',
          '"': '&quot;',
          "'": '&#39;',
          '`': '&#x60;',
          '=': '&#x3D;',
          '/': '&#x2F;',
        }[char]));
      }

        document.getElementById("addTopic").onclick = function () {
          let xhr = new XMLHttpRequest(); 
          xhr.open("PUT", "https://ff0fnmu6n5.execute-api.us-east-2.amazonaws.com/suggestions");
          xhr.setRequestHeader("Content-Type", "application/json"); 
          let form = document.getElementById("SuggestionBox"); 
          let id = `item-${Date.now()}`; 
          let topic = form.elements["topic"].value; 
          let concept = form.elements["concept"].value; 
          concept = escapeHTML(concept);
          xhr.send(JSON.stringify({
            "id": id, 
            "topic": topic, 
            "concept": concept
          })); 
          loadResponses(); 
          form.reset(); 
        };
      </script>
    </div>
  </div>
  <div class="ResponseBox">
      <table id="responses"> 
        <thead>
          <tr>  
            <th role="columnheader" scope="col">Topic</th>
            <th role="columnheader" scope="col">Concept</th>
            <th role="columnheader" scope="col">Action</th>
          </tr>
        </thead>
        <tbody>

        </tbody>
      </table>
<script> 
    function loadResponses() {
      let xhr = new XMLHttpRequest(); 
      xhr.open("GET", "https://ff0fnmu6n5.execute-api.us-east-2.amazonaws.com/suggestions");
      xhr.onload = function () {
        let items = JSON.parse(xhr.responseText); 
        let tableBody = document.getElementById("responses").getElementsByTagName("tbody")[0]; 
        tableBody.innerHTML = "";
        items.forEach(item => {
          let row = document.createElement("tr"); 

          let topicCell = document.createElement("td"); 
          topicCell.textContent = item.topic; 
          row.appendChild(topicCell); 

          let conceptCell = document.createElement("td"); 
          conceptCell.textContent = item.concept; 
          row.appendChild(conceptCell); 

          let actionCell = document.createElement("td"); 

          let deleteButton = document.createElement("button"); 
          deleteButton.textContent = "delete"
          deleteButton.onclick = function() {
            deleteItem(item.id); 
          }
          actionCell.appendChild(deleteButton); 
          row.appendChild(actionCell); 
          tableBody.appendChild(row);  
      });
      }
    xhr.send(); 
    };
  function deleteItem(itemId) {
    let xhr = new XMLHttpRequest(); 
    xhr.open("DELETE", `https://ff0fnmu6n5.execute-api.us-east-2.amazonaws.com/suggestions/${itemId}`);
    xhr.setRequestHeader("Content-Type", "application/json"); 
    xhr.onload = function() {
      loadResponses(); 
    };
    xhr.send(); 
  }
  window.onload = loadResponses; 
  </script>
  </div>
</div>
  <a class="authorTag" href="aboutme.html">Click to learn more about the author of this page!</a>
  </div>
</body>

</html> 