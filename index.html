<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Meowmatical!</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <h1><img src="meowmatical.PNG" alt="Meowmatical Logo" width="300" height="100"></h1>
  <p id="lambda-info">
    <!-- loaded with AJAX -->
  </p>
  <div class="row">
    <div class="column">
      <div> 
        <h2>Theorems</h2>
        <ul> 
          <li><a href="fermat.html">Fermat's Little Theorem</a></li><div id="fermatLikes"><span id="fermat-likes"></span> Like(s)</div>
          <script>
            document.addEventListener("DOMContentLoaded", function() {
              const counter = document.getElementById("fermat-likes");
              if (!counter) return; 
                fetch("https://ff0fnmu6n5.execute-api.us-east-2.amazonaws.com/items/fermat-likes")
                .then(res => res.json())
                .then(data => {
                  counter.textContent = data.count || 0; 
                })
                .catch(err => {
                  console.error("failed to fetch like count: ", err); 
                  counter.textContent = "0"; 
                });
            });
          </script>
      </div>
    
      <div>
        <h2>Proofs</h2>
        <ul> 
          <li><a href="induction.html">Proof by Induction</a></li>
        </ul>
      </div>
    
      <div>
        <h2>Calculus Concepts</h2>
        <ul> 
          <li><a href="integrals.html">Integrals</a></li><div id="integralLikes"><span id="integrals-likes"></span> Like(s)</div>
          <script>
            document.addEventListener("DOMContentLoaded", function() {
              const counter = document.getElementById("integrals-likes");
              if (!counter) return; 
                fetch("https://ff0fnmu6n5.execute-api.us-east-2.amazonaws.com/items/fermat-likes")
                .then(res => res.json())
                .then(data => {
                  counter.textContent = data.count || 0; 
                })
                .catch(err => {
                  console.error("failed to fetch like count: ", err); 
                  counter.textContent = "0"; 
                });
            });
          </script>
        </ul>
      </div>
    </div>
    
    <div class="column">
      <div>
        <h2>Topological Concepts</h2>
        <ul>
          <li><a href="rationaltangles.html">Rational Tangles</a></li>
        </ul>
      </div>
    
      <div>
        <h2>Overview of Fields</h2>
        <ul>
          <li><a href="combinatorics.html">Combinatorics</a></li></l>
        </ul>
      </div>
    
      <div>
        <h2>Irrationalities</h2>
        <ul>
          <li><a href="imaginarynumbers.html">Imaginary Numbers</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div class="QuestionBox">
    <p> Do you have a topic that you want covered on this page? Let us know!</p>
    <form id="SuggestionBox"> 
      <!--<input type="number" placeholder="ID" id="id" name="id">-->
      <input type="text" placeholder="Topic (e.g. Theorem, Proof, etc)" id="topic" name="topic">
      <input type="text" placeholder="Concept..." id="concept" name="concept">
    </form>    
    <button id="addTopic">Submit!</button>
    <script> 
      document.getElementById("addTopic").onclick = function () {
        let xhr = new XMLHttpRequest(); 
        xhr.open("PUT", "https://ff0fnmu6n5.execute-api.us-east-2.amazonaws.com/items");
        xhr.setRequestHeader("Content-Type", "application/json"); 
        let form = document.getElementById("SuggestionBox"); 
        let id = `item-${Date.now()}`; 
        let topic = form.elements["topic"].value; 
        let concept = form.elements["concept"].value; 
        xhr.send(JSON.stringify({
          "id": id, 
          "topic": topic, 
          "concept": concept
        })); 
        loadResponses(); 
        form.reset(); 
      };
    </script>
  </div>
  <div class="ResponseBox">
      <table id="responses"> 
        <thead>
          <tr>  
            <!--<th>ID</th>-->
            <th>Topic</th>
            <th>Concept</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>

        </tbody>
      </table>
<script> 
    function loadResponses() {
      let xhr = new XMLHttpRequest(); 
      xhr.open("GET", "https://ff0fnmu6n5.execute-api.us-east-2.amazonaws.com/items");
      xhr.onload = function () {
        let items = JSON.parse(xhr.responseText); 
        let tableBody = document.getElementById("responses").getElementsByTagName("tbody")[0]; 
        tableBody.innerHTML = "";
        items.forEach(item => {
          let row = document.createElement("tr"); 

          let topicCell = document.createElement("td"); 
          topicCell.textContent = item.topic; 
          row.appendChild(topicCell); 

          let conceptCell = document.createElement("td"); 
          conceptCell.textContent = item.concept; 
          row.appendChild(conceptCell); 

          let actionCell = document.createElement("td"); 

          let deleteButton = document.createElement("button"); 
          deleteButton.textContent = "delete"
          deleteButton.onclick = function() {
            deleteItem(item.id); 
          }
          actionCell.appendChild(deleteButton); 
          row.appendChild(actionCell); 
          tableBody.appendChild(row);  
      });
      }
    xhr.send(); 
    };
  function deleteItem(itemId) {
    let xhr = new XMLHttpRequest(); 
    xhr.open("DELETE", `https://ff0fnmu6n5.execute-api.us-east-2.amazonaws.com/items/${itemId}`);
    xhr.setRequestHeader("Content-Type", "application/json"); 
    xhr.onload = function() {
      loadResponses(); 
    };
    xhr.send(); 
  }
  window.onload = loadResponses; 
  </script>
  </div>
  <a href="aboutme.html">Click to learn more about the author of this page!</a>

</body>

</html> 